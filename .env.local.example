# =============================================================================
# TerraCore Pro — Variables d'environnement locales
# Copiez ce fichier en .env.local et remplissez les valeurs
# NE JAMAIS committer .env.local dans le dépôt Git
# =============================================================================

# -----------------------------------------------------------------------------
# SUPABASE — Base de données et authentification
# Récupérez ces valeurs dans : https://app.supabase.com > Settings > API
# -----------------------------------------------------------------------------

# URL publique de votre projet Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxxxxxxxxx.supabase.co

# Clé anonyme publique (safe pour le client)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-key-here

# Clé de service (SECRET — côté serveur uniquement, ne jamais exposer au client)
SUPABASE_SERVICE_ROLE_KEY=your-key-here

# JWT Secret de votre projet Supabase (Settings > API > JWT Settings)
SUPABASE_JWT_SECRET=your-supabase-jwt-secret-here

# -----------------------------------------------------------------------------
# APPLICATION — Configuration générale de TerraCore Pro
# -----------------------------------------------------------------------------

# URL publique de l'application (sans slash final)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Nom de l'application affiché dans l'interface
NEXT_PUBLIC_APP_NAME=TerraCore Pro

# Environnement : development | staging | production
NODE_ENV=development

# -----------------------------------------------------------------------------
# STRIPE — Paiements en ligne et liens de paiement
# Récupérez ces valeurs dans : https://dashboard.stripe.com/apikeys
# Utilisez les clés TEST (sk_test_ / pk_test_) en développement
# -----------------------------------------------------------------------------

# Clé publiable Stripe (exposée côté client, commence par pk_test_ ou pk_live_)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your-stripe-public-key-here

# Clé secrète Stripe (SECRET — côté serveur uniquement, commence par sk_test_ ou sk_live_)
STRIPE_SECRET_KEY=your-stripe-secret-key-here

# Secret du webhook Stripe (SECRET — généré dans Stripe Dashboard > Webhooks)
# En développement local, utilisez la CLI Stripe : stripe listen --forward-to localhost:3000/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret-here

# -----------------------------------------------------------------------------
# OPENAI — Intelligence artificielle (agents IA TerraCore Pro)
# Agents : meteo_replan | relance_auto | devis_assist | marge_alert
# Récupérez la clé dans : https://platform.openai.com/api-keys
# -----------------------------------------------------------------------------

# Clé API OpenAI (SECRET — côté serveur uniquement)
OPENAI_API_KEY=your-openai-key-here-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Modèle OpenAI utilisé par défaut (ex: gpt-4o, gpt-4o-mini, gpt-4-turbo)
OPENAI_MODEL=gpt-4o

# Nombre maximum de tokens par requête IA
OPENAI_MAX_TOKENS=4096

# -----------------------------------------------------------------------------
# OPENWEATHERMAP — Météo et alertes chantier (agent meteo_replan)
# Récupérez la clé dans : https://home.openweathermap.org/api_keys
# API utilisée : One Call API 3.0
# -----------------------------------------------------------------------------

# Clé API OpenWeatherMap (exposée côté client pour les appels directs)
NEXT_PUBLIC_OPENWEATHER_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -----------------------------------------------------------------------------
# GOOGLE MAPS — Géolocalisation, adresses et calcul d'itinéraires
# Récupérez la clé dans : https://console.cloud.google.com/apis/credentials
# APIs à activer : Maps JavaScript API, Places API, Geocoding API, Directions API
# -----------------------------------------------------------------------------

# Clé API Google Maps (exposée côté client)
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=AIzaXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# -----------------------------------------------------------------------------
# RESEND — Envoi d'emails transactionnels
# Relances clients, devis, factures, notifications
# Récupérez la clé dans : https://resend.com/api-keys
# -----------------------------------------------------------------------------

# Clé API Resend (SECRET — côté serveur uniquement)
RESEND_API_KEY=your-resend-key-here

# Adresse email expéditeur (doit être un domaine vérifié dans Resend)
EMAIL_FROM=no-reply@terracorepro.fr

# Adresse email de réponse (reply-to)
EMAIL_REPLY_TO=contact@terracorepro.fr

# Nom affiché comme expéditeur dans les emails
EMAIL_FROM_NAME=TerraCore Pro

# -----------------------------------------------------------------------------
# STOCKAGE — Fichiers et pièces jointes (Supabase Storage)
# Configuré automatiquement via Supabase, ajustez si besoin
# -----------------------------------------------------------------------------

# Nom du bucket Supabase Storage pour les logos d'entreprise
NEXT_PUBLIC_STORAGE_BUCKET_LOGOS=logos

# Nom du bucket Supabase Storage pour les pièces jointes (devis, factures, etc.)
NEXT_PUBLIC_STORAGE_BUCKET_ATTACHMENTS=attachments

# Nom du bucket Supabase Storage pour les avatars utilisateurs
NEXT_PUBLIC_STORAGE_BUCKET_AVATARS=avatars

# -----------------------------------------------------------------------------
# FONCTIONNALITÉS — Flags d'activation des modules
# Valeurs : true | false
# -----------------------------------------------------------------------------

# Activer le module IA (agents automatiques)
NEXT_PUBLIC_FEATURE_AI_AGENTS=true

# Activer les paiements Stripe en ligne
NEXT_PUBLIC_FEATURE_STRIPE_PAYMENTS=true

# Activer les alertes météo et la replanification automatique
NEXT_PUBLIC_FEATURE_WEATHER_ALERTS=true

# Activer les relances automatiques (agent relance_auto)
NEXT_PUBLIC_FEATURE_AUTO_REMINDERS=true

# Activer le module maintenance et contrats récurrents
NEXT_PUBLIC_FEATURE_MAINTENANCE_CONTRACTS=true

# Activer les bons de livraison
NEXT_PUBLIC_FEATURE_DELIVERY_NOTES=true

# Activer les situations de travaux (factures progressives)
NEXT_PUBLIC_FEATURE_PROGRESS_INVOICES=true

# -----------------------------------------------------------------------------
# SÉCURITÉ ET SESSIONS
# -----------------------------------------------------------------------------

# Durée de session en secondes (86400 = 24h, 604800 = 7 jours)
SESSION_TIMEOUT_SECONDS=86400

# Clé secrète pour la signature des tokens internes (générez avec : openssl rand -base64 32)
INTERNAL_SECRET_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -----------------------------------------------------------------------------
# LOGS ET MONITORING
# -----------------------------------------------------------------------------

# Niveau de log : debug | info | warn | error
LOG_LEVEL=debug

# Activer les logs détaillés des requêtes Supabase (développement uniquement)
SUPABASE_DEBUG=false

# Activer les logs détaillés des appels IA
OPENAI_DEBUG=false
